<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ZAD ULTIMATE OMNI | Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„ Ø§Ù„Ø£Ø®ÙŠØ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --zad-green: #059669; --zad-dark: #064e3b; --zad-bg: #f8fafc;
            --gold: #fbbf24; --danger: #ef4444; --royal: #1e40af; --soft-blue: #eff6ff;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Cairo', sans-serif; background: var(--zad-bg); color: #1e293b; direction: rtl; overflow-x: hidden; }

        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .header { background: linear-gradient(135deg, var(--zad-dark), var(--zad-green)); color: white; padding: 30px 60px; display: flex; justify-content: space-between; align-items: center; border-bottom: 5px solid var(--gold); box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .logo-box h1 { font-weight: 900; font-size: 30px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }

        .container { max-width: 1400px; margin: 40px auto; padding: 0 20px; }

        /* Ø±Ø§Ø¯Ø§Ø± Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ */
        .radar-alert { background: #fee2e2; color: #991b1b; padding: 15px 30px; border-radius: 20px; margin-bottom: 30px; border-right: 10px solid var(--danger); font-weight: 900; display: none; }

        /* ÙƒØ±ÙˆØª Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: white; padding: 35px; border-radius: 40px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.03); border: 1px solid #eee; transition: 0.3s; }
        .stat-card:hover { transform: translateY(-10px); border-color: var(--zad-green); }
        .stat-card b { display: block; font-size: 45px; color: var(--zad-dark); }
        .stat-card span { font-weight: 800; color: #64748b; font-size: 14px; }

        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ø¨Ù‚Ø±ÙŠØ© */
        .hub-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; }
        .hub-btn { background: white; padding: 50px 25px; border-radius: 45px; border: none; cursor: pointer; transition: 0.3s; display: flex; flex-direction: column; align-items: center; gap: 15px; box-shadow: 0 10px 20px rgba(0,0,0,0.02); }
        .hub-btn:hover { background: var(--zad-dark); color: white; transform: rotate(-2deg) scale(1.05); }
        .hub-btn b { font-size: 19px; font-weight: 900; }

        /* Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø´Ø§Ù…Ù„ */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(15px); z-index: 10000; }
        .modal-content { background: white; width: 90%; max-width: 1100px; margin: 2% auto; padding: 50px; border-radius: 50px; position: relative; max-height: 90vh; overflow-y: auto; }
        .close { position: absolute; left: 40px; top: 30px; font-size: 40px; cursor: pointer; color: var(--danger); }

        /* Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ùˆ DNA */
        .idea-box { background: #fdfcf0; padding: 25px; border-radius: 30px; border: 2px dashed var(--gold); margin-bottom: 20px; }
        .dna-tag { background: var(--soft-blue); color: var(--royal); padding: 5px 15px; border-radius: 10px; font-size: 12px; font-weight: 900; display: inline-block; margin-top: 10px; }
        .xp-badge { background: #334155; color: white; padding: 4px 12px; border-radius: 50px; font-size: 11px; margin-right: 10px; }

        /* Ù…Ø¯Ø®Ù„Ø§Øª */
        input, select, textarea { width: 100%; padding: 18px; border: 2px solid #e2e8f0; border-radius: 20px; font-family: 'Cairo'; font-weight: 700; margin-bottom: 15px; }
        .btn-action { background: var(--zad-green); color: white; border: none; padding: 20px; border-radius: 25px; width: 100%; font-weight: 900; font-size: 18px; cursor: pointer; transition: 0.3s; }
        .btn-action:hover { background: var(--zad-dark); box-shadow: 0 10px 25px rgba(5,150,105,0.3); }
        
        table { width: 100%; border-collapse: separate; border-spacing: 0 10px; }
        th { padding: 15px; text-align: right; color: #64748b; }
        td { padding: 20px; background: #f8fafc; border-radius: 15px; font-weight: 700; }
    </style>
</head>
<body>

<div class="header">
    <div class="logo-box"><h1>ZAD ULTIMATE ğŸ’</h1><p>Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ù…Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…ØªØ·ÙˆØ¹ÙŠ Ø²Ø§Ø¯</p></div>
    <div style="text-align: left;">
        <span id="p-name" style="font-weight: 900; background: rgba(255,255,255,0.2); padding: 12px 30px; border-radius: 50px;">Ø§Ù„Ù‚Ø§Ø¦Ø¯Ø©: Ø´Ø±ÙˆÙ‚ Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø²Ø§Ù‚ ğŸ‘‘</span>
    </div>
</div>

<div class="container">
    <div id="radar-alert" class="radar-alert">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø±Ø§Ø¯Ø§Ø±: Ø§Ù†Ø®ÙØ§Ø¶ Ù…Ù„Ø­ÙˆØ¸ ÙÙŠ Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø¹Ø§Ù… Ù„Ù„ÙØ±ÙŠÙ‚.. ÙŠÙØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø³Ø¨Ø§Ø¨.</div>

    <div class="stats-grid">
        <div class="stat-card"><b id="s-vol">0</b><span>Ù…ØªØ·ÙˆØ¹ ÙÙŠ Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</span></div>
        <div class="stat-card"><b id="s-perf" style="color:var(--royal)">0%</b><span>ÙƒÙØ§Ø¡Ø© Ø§Ù„Ù…Ø¤Ø³Ø³Ø©</span></div>
        <div class="stat-card"><b id="s-idea" style="color:var(--gold)">0</b><span>ÙÙƒØ±Ø© ÙÙŠ Ø§Ù„Ø®Ø²Ù†Ø©</span></div>
        <div class="stat-card"><b id="s-frz" style="color:var(--danger)">0</b><span>Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªØ¬Ù…ÙŠØ¯</span></div>
    </div>

    <div class="hub-grid">
        <button class="hub-btn" onclick="omni.openVols()"><b>ğŸ‘¥ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†</b><span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</span></button>
        <button class="hub-btn" onclick="omni.openEval()"><b>ğŸš€ ØªÙ‚ÙŠÙŠÙ… DNA</b><span>Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ</span></button>
        <button class="hub-btn" onclick="omni.openVault()"><b>ğŸ’¡ Ø®Ø²Ù†Ø© Ø§Ù„Ø£ÙÙƒØ§Ø±</b><span>Ø¨Ù†Ùƒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹</span></button>
        <button class="hub-btn" onclick="omni.openReports()"><b>ğŸ“Š Ø§Ù„Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ù…Ù„ÙƒÙŠ</b><span>PDF ÙˆØ§Ù„Ø£ÙˆØ³Ù…Ø©</span></button>
        <button class="hub-btn" onclick="omni.openAdmins()"><b>ğŸ”‘ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª</b><span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙÙ‚ÙŠÙ…ÙŠÙ†</span></button>
        <button class="hub-btn" onclick="omni.openXP()"><b>ğŸ† Ø§Ù„Ø±ØªØ¨ ÙˆØ§Ù„Ø£Ù„Ù‚Ø§Ø¨</b><span>Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø·</span></button>
        <button class="hub-btn" onclick="omni.openFreeze()"><b>â„ï¸ Ø§Ù„ÙØ±ÙŠØ²</b><span>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ø°Ø§Ø±</span></button>
        <button class="hub-btn" onclick="omni.openConfig()"><b>âš™ï¸ Ø§Ù„Ø¶Ø¨Ø·</b><span>Ù…ÙˆØ§Ø²ÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù…</span></button>
    </div>
</div>

<div id="modal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="omni.close()">&times;</span>
        <h2 id="m-title" style="margin-bottom:30px; font-weight:900; color:var(--zad-dark)"></h2>
        <div id="m-body"></div>
    </div>
</div>

<script>
    const API = 'https://costly-lucy-zad-project-7052acd0.koyeb.app/api';
    let vols = [];

    const omni = {
        async init() {
            this.refresh();
        },
        async refresh() {
            const res = await fetch(`${API}/volunteers/statistics/overview`);
            const d = await res.json();
            document.getElementById('s-vol').innerText = d.totalVolunteers || 0;
            document.getElementById('s-perf').innerText = (d.avgPerformance || 0) + "%";
            document.getElementById('s-frz').innerText = d.activeAlerts || 0;
            if(d.avgPerformance < 75) document.getElementById('radar-alert').style.display = 'block';
            
            const vRes = await fetch(`${API}/volunteers`);
            const vData = await vRes.json();
            vols = vData.volunteers;
            
            const eRes = await fetch(`${API}/evaluations`);
            const eData = await eRes.json();
            document.getElementById('s-idea').innerText = eData.length;
        },
        openModal(t) { document.getElementById('m-title').innerText = t; document.getElementById('modal').style.display = 'block'; },
        close() { document.getElementById('modal').style.display = 'none'; },

        // --- ØªÙ‚ÙŠÙŠÙ… DNA ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù‚ÙˆØ© ---
        openEval() {
            this.openModal("ğŸš€ Ù…Ø¹Ø§Ù„Ø¬ ØªÙ‚ÙŠÙŠÙ… DNA Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„");
            const opts = vols.map(v => `<option value="${v.id}">${v.full_name}</option>`).join('');
            document.getElementById('m-body').innerHTML = `
                <div style="display:grid; grid-template-columns:1fr 1fr; gap:30px">
                    <div>
                        <label>Ø§Ù„Ù…ØªØ·ÙˆØ¹</label><select id="ev-id">${opts}</select>
                        <div style="margin-top:15px">
                            <label>Ø§Ù„Ù…ÙŠØ¯Ø§Ù†ÙŠ (10)</label><input type="number" id="k1" placeholder="0-10">
                            <label>Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„Ø±Ø¯ (10)</label><input type="number" id="k2" placeholder="0-10">
                            <label>Ø³Ø±Ø¹Ø© Ø§Ù„ØªÙ†ÙÙŠØ° (10)</label><input type="number" id="k3" placeholder="0-10">
                        </div>
                    </div>
                    <div>
                        <label>ğŸ’¡ ÙÙƒØ±Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</label>
                        <textarea id="ev-idea" style="height:100px" placeholder="Ù…Ø§ Ù‡ÙŠ Ø¨ØµÙ…ØªÙ‡ØŸ"></textarea>
                        <label style="margin-top:15px">â¤ï¸ Ø±Ø³Ø§Ù„Ø© ØªÙ‚Ø¯ÙŠØ± Ù…Ù† Ø´Ø±ÙˆÙ‚</label>
                        <textarea id="ev-msg" style="height:100px" placeholder="ÙƒÙ„Ù…Ø§Øª ØªÙ„Ù…Ø³ Ø§Ù„Ù‚Ù„Ø¨..."></textarea>
                    </div>
                </div>
                <button class="btn-action" onclick="omni.saveEval()">Ø§Ø¹ØªÙ…Ø§Ø¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙˆØªØ­Ù„ÙŠÙ„ DNA</button>
            `;
        },

        async saveEval() {
            const k1 = parseInt(document.getElementById('k1').value)||0;
            const k2 = parseInt(document.getElementById('k2').value)||0;
            const k3 = parseInt(document.getElementById('k3').value)||0;
            const score = (((k1+k2+k3)/30)*100).toFixed(1);
            
            // ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ù…Ø· ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            let dna = k1 > 8 ? "Ù†Ù…Ø·: Ù…ÙŠØ¯Ø§Ù†ÙŠ Ø®Ø§Ø±Ù‚" : (k2 > 8 ? "Ù†Ù…Ø·: ØªÙˆØ§ØµÙ„ Ø¯Ø¨Ù„ÙˆÙ…Ø§Ø³ÙŠ" : "Ù†Ù…Ø·: Ø¥Ø¯Ø§Ø±ÙŠ Ø¯Ù‚ÙŠÙ‚");
            
            const payload = {
                volunteer_id: document.getElementById('ev-id').value, percentage: score,
                evaluation_month: 12, evaluation_year: 2025,
                notes: `${document.getElementById('ev-idea').value} | DNA: ${dna} | ${document.getElementById('ev-msg').value}`,
                status: score >= 90 ? 'Ù†Ø¬Ù… Ø²Ø§Ø¯' : 'Ù†Ø´Ø·'
            };

            await fetch(`${API}/evaluations`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify(payload) });
            alert(`ØªÙ… Ø§Ù„ØªÙ‚ÙŠÙŠÙ…! Ø§Ù„Ø¯Ø±Ø¬Ø©: ${score}% \nØªÙ… ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†Ù…Ø· ÙƒÙ€ ${dna}`);
            this.close(); this.refresh();
        },

        // --- Ø®Ø²Ù†Ø© Ø§Ù„Ø£ÙÙƒØ§Ø± ---
        async openVault() {
            this.openModal("ğŸ’¡ Ø®Ø²Ù†Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ© (Ø¨Ù†Ùƒ Ø§Ù„Ø£ÙÙƒØ§Ø±)");
            const res = await fetch(`${API}/evaluations`);
            const data = await res.json();
            let h = `<div style="display:grid; grid-template-columns:1fr 1fr; gap:20px">`;
            data.forEach(e => {
                h += `<div class="idea-box">
                        <strong>${e.volunteer_name}</strong>
                        <p style="margin-top:10px">${e.notes.split('|')[0]}</p>
                        <span class="dna-tag">${e.notes.split('|')[1] || 'Ù‚ÙŠØ¯ Ø§Ù„ØªØ­Ù„ÙŠÙ„'}</span>
                      </div>`;
            });
            document.getElementById('m-body').innerHTML = h + "</div>";
        },

        // --- Ø§Ù„Ø±ØªØ¨ ÙˆØ§Ù„Ù†Ù‚Ø§Ø· ---
        openXP() {
            this.openModal("ğŸ† Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ØªØ¨ ÙˆÙ†Ù‚Ø§Ø· Ø§Ù„Ø®Ø¨Ø±Ø© (Gamification)");
            let h = `<table><tr><th>Ø§Ù„Ù…ØªØ·ÙˆØ¹</th><th>Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„ØªØ±Ø§ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø±ØªØ¨Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</th></tr>`;
            vols.forEach(v => {
                h += `<tr><td>${v.full_name}</td><td>450 XP</td><td><span class="xp-badge" style="background:var(--gold)">Ù…ØªØ·ÙˆØ¹ Ø°Ù‡Ø¨ÙŠ</span></td></tr>`;
            });
            document.getElementById('m-body').innerHTML = h + "</table>";
        },

        // --- Ø§Ù„Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ù…Ù„ÙƒÙŠ Ùˆ PDF ---
        async openReports() {
            this.openModal("ğŸ“Š Ø§Ù„Ø£Ø±Ø´ÙŠÙ Ø§Ù„Ù…Ù„ÙƒÙŠ Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„Ø£ÙˆØ³Ù…Ø©");
            const res = await fetch(`${API}/evaluations`);
            const data = await res.json();
            let h = ``;
            data.forEach(e => {
                const isStar = e.percentage >= 90;
                h += `<div id="rep-${e.id}" style="padding:40px; border-radius:35px; border:2px solid #eee; background:white; margin-bottom:25px">
                        <div style="display:flex; justify-content:space-between">
                            <h3>${e.volunteer_name}</h3>
                            <b style="font-size:35px; color:var(--zad-green)">${e.percentage}%</b>
                        </div>
                        ${isStar ? '<div style="background:#fefce8; padding:10px; border-radius:15px; border:1px dashed #f59e0b; margin:15px 0; font-weight:900; color:#92400e; text-align:center">ğŸ–ï¸ ÙˆØ³Ø§Ù… "Ù†Ø¬Ù… Ø²Ø§Ø¯" Ù„Ù„ØªÙ…ÙŠØ² Ø§Ù„Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ</div>' : ''}
                        <p><b>Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©:</b> ${e.notes.split('|')[0]}</p>
                        <p><b>Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù‚Ø§Ø¦Ø¯Ø©:</b> ${e.notes.split('|')[2] || e.notes}</p>
                        <button class="btn-action" style="margin-top:20px; width:auto; background:var(--royal)" onclick="omni.export('rep-${e.id}', '${e.volunteer_name}')">ØªØ­Ù…ÙŠÙ„ PDF Ø±Ø³Ù…ÙŠ</button>
                    </div>`;
            });
            document.getElementById('m-body').innerHTML = h;
        },

        export(id, name) {
            const el = document.getElementById(id);
            html2pdf().from(el).set({ margin: 1, filename: `ØªÙ‚Ø±ÙŠØ±_Ø²Ø§Ø¯_${name}.pdf`, html2canvas: { scale: 2 } }).save();
        },

        // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ---
        openAdmins() {
            this.openModal("ğŸ”‘ Ø¥Ø¯Ø§Ø±Ø© ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…ÙÙ‚ÙŠÙ…ÙŠÙ†");
            document.getElementById('m-body').innerHTML = `
                <div style="background:var(--soft-blue); padding:30px; border-radius:30px; margin-bottom:20px">
                    <h4>Ø¥Ø¶Ø§ÙØ© Ù…ÙÙ‚ÙŠÙ… Ø¬Ø¯ÙŠØ¯</h4>
                    <input id="adm-n" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙÙ‚ÙŠÙ…" style="margin-top:10px">
                    <select id="adm-l"><option value="eval">ØµÙ„Ø§Ø­ÙŠØ© ØªÙ‚ÙŠÙŠÙ…</option><option value="full">ØµÙ„Ø§Ø­ÙŠØ© ÙƒØ§Ù…Ù„Ø©</option></select>
                    <button class="btn-action" onclick="alert('ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© Ù„Ù„Ù…Ù‚ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯')">ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØµÙˆÙ„</button>
                </div>
                <table><tr><th>Ø§Ù„Ù…ÙÙ‚ÙŠÙ…</th><th>Ø§Ù„Ø±ØªØ¨Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr>
                <tr><td>Ø´Ø±ÙˆÙ‚ Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø²Ø§Ù‚</td><td>Super Admin</td><td>Ø§Ù„Ù…Ø§Ù„Ùƒ</td></tr>
                </table>
            `;
        },

        // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† ---
        openVols() {
            this.openModal("ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø¹Ø§Ø¦Ù„Ø© Ø²Ø§Ø¯");
            document.getElementById('m-body').innerHTML = `
                <div style="background:#f1f5f9; padding:30px; border-radius:30px; margin-bottom:20px">
                    <input id="vn" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ØªØ·ÙˆØ¹"><input id="vp" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" style="margin-top:10px">
                    <button class="btn-action" onclick="omni.addV()" style="margin-top:15px">+ ØªØ¹Ù…ÙŠØ¯ Ù…ØªØ·ÙˆØ¹ Ø¬Ø¯ÙŠØ¯</button>
                </div>
                <div id="v-list"></div>`;
            this.renderV();
        },
        async addV() {
            await fetch(`${API}/volunteers`, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({full_name:document.getElementById('vn').value, phone:document.getElementById('vp').value, role:'field'}) });
            this.openVols(); this.refresh();
        },
        async renderV() {
            const res = await fetch(`${API}/volunteers`);
            const d = await res.json();
            let h = `<table><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr>`;
            d.volunteers.forEach(v => h += `<tr><td>${v.full_name}</td><td><button onclick="omni.delV('${v.id}')" style="color:red; border:none; cursor:pointer">Ø­Ø°Ù</button></td></tr>`);
            document.getElementById('v-list').innerHTML = h + `</table>`;
        },
        async delV(id) { if(confirm("Ø­Ø°ÙØŸ")) { await fetch(`${API}/volunteers/${id}`, {method:'DELETE'}); this.renderV(); this.refresh(); } }
    };

    omni.init();
</script>
</body>
</html>
