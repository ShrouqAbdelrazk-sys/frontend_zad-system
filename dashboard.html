<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ZAD OMNI | Ultimate v4</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root { --primary: #059669; --dark: #064e3b; --bg: #f8fafc; --text: #111827; --accent: #f59e0b; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Cairo', sans-serif; }
        body { background: var(--bg); color: var(--text); }

        /* Admin Bar & Navigation */
        .admin-bar { background: var(--dark); color: white; padding: 12px 40px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .logo-text { font-weight: 900; font-size: 22px; letter-spacing: 1px; }
        .quick-nav { display: flex; gap: 10px; }
        .quick-nav button { background: rgba(255,255,255,0.15); border: none; color: white; padding: 6px 16px; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 600; }
        .quick-nav button:hover { background: var(--primary); }

        /* Layout */
        .container { max-width: 1300px; margin: 40px auto; padding: 0 20px; }
        .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .card { background: white; padding: 30px; border-radius: 24px; border: 1px solid #e5e7eb; cursor: pointer; transition: 0.3s; position: relative; overflow: hidden; }
        .card:hover { transform: translateY(-8px); border-color: var(--primary); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.05); }
        .card h3 { font-weight: 800; font-size: 1.3rem; color: var(--dark); margin-bottom: 10px; }
        .card p { font-size: 14px; color: #6b7280; }
        .card i { font-size: 40px; display: block; margin-bottom: 15px; }

        /* Pages System */
        .page { display: none; background: white; padding: 40px; border-radius: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.04); animation: slideUp 0.4s ease; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 2px solid #f3f4f6; padding-bottom: 20px; }
        .back-btn { background: #f3f4f6; border: none; padding: 10px 20px; border-radius: 12px; cursor: pointer; font-weight: 700; color: #4b5563; }

        /* Forms & Inputs */
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 8px; font-weight: 700; color: #374151; font-size: 14px; }
        input, select, textarea { width: 100%; padding: 14px; border: 1px solid #e5e7eb; border-radius: 14px; font-size: 15px; background: #f9fafb; outline: none; }
        input:focus { border-color: var(--primary); background: white; }
        .btn-submit { background: var(--primary); color: white; border: none; padding: 16px; border-radius: 14px; width: 100%; font-weight: 800; cursor: pointer; font-size: 16px; margin-top: 10px; }

        /* Table Style */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { text-align: right; padding: 15px; color: #6b7280; font-size: 13px; text-transform: uppercase; border-bottom: 2px solid #f3f4f6; }
        td { padding: 20px 15px; border-bottom: 1px solid #f3f4f6; font-weight: 600; }

        /* Report Styles */
        .report-card { border: 2px solid var(--primary); padding: 40px; border-radius: 30px; background: white; position: relative; }
        .badge-gold { background: linear-gradient(45deg, #fbbf24, #f59e0b); color: white; padding: 5px 15px; border-radius: 50px; font-size: 12px; }
        .ai-note { background: #ecfdf5; border-right: 5px solid var(--primary); padding: 15px; margin: 15px 0; border-radius: 8px; font-size: 14px; }
    </style>
</head>
<body>

<div class="admin-bar">
    <div class="logo-text">ZAD OMNI</div>
    <div class="quick-nav">
        <button onclick="omni.show('page-vols')">+ Ù…ØªØ·ÙˆØ¹</button>
        <button onclick="omni.show('page-criteria')">+ Ù…Ø¹ÙŠØ§Ø±</button>
        <button onclick="omni.show('page-eval')">+ ØªÙ‚ÙŠÙŠÙ…</button>
    </div>
</div>

<div class="container">
    <div id="page-home">
        <div style="margin-bottom: 40px;">
            <h1 style="font-weight: 900; font-size: 2.5rem; color: var(--dark);">Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø°ÙƒÙŠØ©</h1>
            <p style="color: #6b7280;">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙØŒ Ø¥Ù„ÙŠÙƒÙ ØªØ­Ù„ÙŠÙ„ Ø£Ø¯Ø§Ø¡ ÙØ±ÙŠÙ‚ Ø²Ø§Ø¯ Ù„Ù„ÙŠÙˆÙ….</p>
        </div>
        <div class="dashboard-grid">
            <div class="card" onclick="omni.show('page-vols')"><i>ğŸ‘¥</i><h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ø¦Ù„Ø©</h3><p>Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†ØŒ Ø§Ù„Ø£Ø¹Ù…Ø§Ø±ØŒ ÙˆØ§Ù„ØªØ±Ø§ÙƒÙ…ÙŠ</p></div>
            <div class="card" onclick="omni.show('page-eval')"><i>ğŸš€</i><h3>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙˆØ§Ù„Ù€ AI</h3><p>ØªÙˆÙ„ÙŠØ¯ ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØªØ­Ù„ÙŠÙ„ DNA Ø§Ù„Ø£Ø¯Ø§Ø¡</p></div>
            <div class="card" onclick="omni.show('page-criteria')"><i>ğŸ“</i><h3>Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø°ÙƒÙŠØ©</h3><p>Ø¥Ø¯Ø§Ø±Ø© Ø¨Ù†ÙˆØ¯ Ø§Ù„Ù€ KPIs</p></div>
            <div class="card" onclick="omni.show('page-admins')"><i>ğŸ”‘</i><h3>Ø§Ù„Ù…ÙÙ‚ÙŠÙ…ÙŠÙ†</h3><p>Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆØ§Ù„ÙˆØµÙˆÙ„ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯</p></div>
            <div class="card" onclick="omni.show('page-vault')"><i>ğŸ’¡</i><h3>Ø®Ø²Ù†Ø© Ø§Ù„Ø£ÙÙƒØ§Ø±</h3><p>Ø¨Ù†Ùƒ Ø§Ù„ÙƒØ±ÙŠØªÙŠÙÙŠØªÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„</p></div>
            <div class="card" onclick="omni.show('page-settings')"><i>ğŸ”’</i><h3>Ø§Ù„Ø£Ù…Ø§Ù†</h3><p>ØªØºÙŠÙŠØ± Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯ ÙˆØ§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</p></div>
        </div>
    </div>

    <div id="page-vols" class="page">
        <div class="page-header"><h2>Ø¥Ø¯Ø§Ø±Ø© Ø¹Ø§Ø¦Ù„Ø© Ø²Ø§Ø¯</h2><button class="back-btn" onclick="omni.show('page-home')">Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button></div>
        <div class="form-grid">
            <div class="input-group"><label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label><input id="v-name" placeholder="Ø§Ù„Ø§Ø³Ù… Ø«Ù„Ø§Ø«ÙŠ"></div>
            <div class="input-group"><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label><input type="date" id="v-birth" onchange="omni.calcAge(this.value)"></div>
            <div class="input-group"><label>Ø§Ù„Ø¹Ù…Ø± Ø§Ù„Ø°ÙƒÙŠ</label><input id="v-age" disabled placeholder="ÙŠØªÙ… Ø­Ø³Ø§Ø¨Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹"></div>
            <div class="input-group"><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</label><input type="date" id="v-join"></div>
        </div>
        <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø³Ø±ÙŠ</label><textarea id="v-note" rows="3"></textarea>
        <button class="btn-submit" onclick="omni.saveVol()">+ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ØªØ·ÙˆØ¹ Ù„Ù„Ù‚Ø§Ø¹Ø¯Ø©</button>
        <div id="v-table-render"></div>
    </div>

    <div id="page-criteria" class="page">
        <div class="page-header"><h2>Ø¶Ø¨Ø· Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± (KPIs)</h2><button class="back-btn" onclick="omni.show('page-home')">Ø¹ÙˆØ¯Ø©</button></div>
        <div class="form-grid" style="grid-template-columns: 2fr 1fr;">
            <input id="c-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø¹ÙŠØ§Ø± (Ù…Ø«Ù„Ø§Ù‹: Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·)">
            <input id="c-max" type="number" placeholder="Ø§Ù„Ø¯Ø±Ø¬Ø© Ø§Ù„Ù‚ØµÙˆÙ‰">
        </div>
        <button class="btn-submit" onclick="omni.saveCriteria()">Ø­ÙØ¸ Ø§Ù„Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯</button>
        <div id="c-table-render"></div>
    </div>

    <div id="page-eval" class="page">
        <div class="page-header"><h2>Ø±Ø§Ø¯Ø§Ø± Ø§Ù„Ø£Ø¯Ø§Ø¡ ÙˆØ§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø°ÙƒÙŠ</h2><button class="back-btn" onclick="omni.show('page-home')">Ø¹ÙˆØ¯Ø©</button></div>
        <label>Ø§Ø®ØªØ± Ø§Ù„Ù…ØªØ·ÙˆØ¹ Ù„Ù„ØªÙ‚ÙŠÙŠÙ…</label><select id="ev-select" style="margin-bottom: 30px;"></select>
        <div id="dynamic-fields" class="form-grid"></div>
        <div style="background: #fff7ed; padding: 20px; border-radius: 20px; margin: 20px 0;">
            <label>ğŸ’¡ Ø¥Ø¶Ø§ÙØ© ÙÙƒØ±Ø© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
            <textarea id="ev-idea" placeholder="Ù„Ùˆ Ø§Ù„Ù…ØªØ·ÙˆØ¹ Ø§Ù‚ØªØ±Ø­ ÙÙƒØ±Ø©ØŒ Ø§ÙƒØªØ¨Ù‡Ø§ Ù‡Ù†Ø§ Ù„ØªØ¶Ø§Ù Ù„Ø¨Ù†Ùƒ Ø§Ù„Ø£ÙÙƒØ§Ø±"></textarea>
        </div>
        <button class="btn-submit" onclick="omni.generateFullReport()">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙˆØ§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù†ÙØ³ÙŠ</button>
        <div id="report-render-area"></div>
    </div>

    <div id="page-admins" class="page">
        <div class="page-header"><h2>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‚ÙŠÙ…ÙŠÙ† (Super Admin)</h2><button class="back-btn" onclick="omni.show('page-home')">Ø¹ÙˆØ¯Ø©</button></div>
        <div class="form-grid">
            <input id="adm-email" type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ù…Ù‚ÙŠÙ…">
            <select id="adm-role"><option>ØªÙ‚ÙŠÙŠÙ… Ù…ÙŠØ¯Ø§Ù†ÙŠ ÙÙ‚Ø·</option><option>ØªÙ‚ÙŠÙŠÙ… ÙƒØ§Ù…Ù„</option><option>Ø¹Ø±Ø¶ ØªÙ‚Ø§Ø±ÙŠØ± ÙÙ‚Ø·</option></select>
        </div>
        <button class="btn-submit" onclick="omni.addAdmin()">ØªÙØ¹ÙŠÙ„ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ù‚ÙŠÙ…</button>
        <div id="adm-table-render"></div>
    </div>
</div>

<script>
    const API = 'https://costly-lucy-zad-project-7052acd0.koyeb.app/api';
    let criteria = JSON.parse(localStorage.getItem('z_crit')) || [{id:1, name:'Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø·', max:10}, {id:2, name:'Ø§Ù„ØªÙØ§Ø¹Ù„', max:10}];
    let admins = JSON.parse(localStorage.getItem('z_adms')) || [];

    const omni = {
        async init() {
            this.loadVols();
            this.renderCriteria();
            this.renderAdmins();
        },
        show(id) {
            document.querySelectorAll('.page, #page-home').forEach(p => p.style.display = 'none');
            document.getElementById(id).style.display = 'block';
            if(id === 'page-eval') this.prepareEval();
        },

        // --- Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† ---
        calcAge(val) {
            if(!val) return;
            const age = new Date().getFullYear() - new Date(val).getFullYear();
            document.getElementById('v-age').value = age + " Ø³Ù†Ø©";
        },
        async saveVol() {
            const name = document.getElementById('v-name').value;
            if(!name) return alert("Ø§ÙƒØªØ¨ÙŠ Ø§Ù„Ø§Ø³Ù…");
            const payload = { full_name: name, phone: document.getElementById('v-age').value, role: document.getElementById('v-join').value + "|" + document.getElementById('v-note').value };
            const res = await fetch(`${API}/volunteers`, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload) });
            if(res.ok) { alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù†Ø¬Ø§Ø­ âœ…"); this.loadVols(); }
        },
        async loadVols() {
            const res = await fetch(`${API}/volunteers`);
            const d = await res.json();
            const list = document.getElementById('v-table-render');
            let h = `<table><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø¹Ù…Ø±</th><th>Ø§Ù„Ù„Ù‚Ø¨</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr>`;
            d.volunteers.forEach(v => {
                const joinDate = v.role.split('|')[0] || new Date();
                const months = Math.floor((new Date() - new Date(joinDate)) / (1000*60*60*24*30));
                let rank = "Ù…ØªØ·ÙˆØ¹ Ù†Ø§Ø´Ø¦";
                if(months > 6) rank = "Ù…ØªØ·ÙˆØ¹ Ø®Ø¨ÙŠØ±";
                if(months > 12) rank = "Ø¹Ù…ÙˆØ¯ Ù…Ù† Ø£Ø¹Ù…Ø¯Ø© Ø²Ø§Ø¯";
                
                h += `<tr><td>${v.full_name}</td><td>${v.phone || 'ØŸ'}</td><td><span class="badge-gold">${rank}</span></td><td><button onclick="omni.delV('${v.id}')" style="color:red; cursor:pointer; border:none; background:none;">Ø­Ø°Ù</button></td></tr>`;
            });
            list.innerHTML = h + `</table>`;
            // ØªØ­Ø¯ÙŠØ« dropdown Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
            document.getElementById('ev-select').innerHTML = d.volunteers.map(v => `<option value="${v.id}">${v.full_name}</option>`).join('');
        },
        async delV(id) { if(confirm("Ø­Ø°ÙØŸ")) { await fetch(`${API}/volunteers/${id}`, {method:'DELETE'}); this.loadVols(); } },

        // --- Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± ---
        saveCriteria() {
            const n = document.getElementById('c-name').value;
            const m = document.getElementById('c-max').value;
            if(!n || !m) return;
            criteria.push({id:Date.now(), name:n, max:m});
            localStorage.setItem('z_crit', JSON.stringify(criteria));
            this.renderCriteria();
        },
        renderCriteria() {
            let h = `<table><tr><th>Ø§Ù„Ù…Ø¹ÙŠØ§Ø±</th><th>Ø§Ù„Ø¯Ø±Ø¬Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr>`;
            criteria.forEach(c => h += `<tr><td>${c.name}</td><td>${c.max}</td><td><button onclick="omni.delC(${c.id})">Ø­Ø°Ù</button></td></tr>`);
            document.getElementById('c-table-render').innerHTML = h + `</table>`;
        },
        delC(id) { criteria = criteria.filter(c => c.id !== id); localStorage.setItem('z_crit', JSON.stringify(criteria)); this.renderCriteria(); },

        // --- Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙˆØ§Ù„Ù€ AI ---
        prepareEval() {
            document.getElementById('dynamic-fields').innerHTML = criteria.map(c => `
                <div class="input-group">
                    <label>${c.name} (Ù…Ù† ${c.max})</label>
                    <input type="number" class="ev-inp" data-name="${c.name}" data-max="${c.max}">
                </div>
            `).join('');
        },
        async generateFullReport() {
            let total = 0, maxPoints = 0, strengths = [], weaknesses = [];
            const vName = document.getElementById('ev-select').options[document.getElementById('ev-select').selectedIndex].text;
            
            document.querySelectorAll('.ev-inp').forEach(inp => {
                let v = parseInt(inp.value) || 0;
                let m = parseInt(inp.dataset.max);
                total += v; maxPoints += m;
                if(v >= m * 0.8) strengths.push(inp.dataset.name);
                else if(v < m * 0.5) weaknesses.push(inp.dataset.name);
            });

            const score = ((total/maxPoints)*100).toFixed(1);
            const dna = strengths.length > weaknesses.length ? "Ù…Ø¨Ø§Ø¯Ø± Ø¨Ø§Ù„ÙØ·Ø±Ø©" : "ÙŠØ­ØªØ§Ø¬ Ù„ØªÙˆØ¬ÙŠÙ‡ Ù…Ù‡Ø§Ù…ÙŠ";
            const idea = document.getElementById('ev-idea').value;

            document.getElementById('report-render-area').innerHTML = `
                <div class="report-card" id="pdf-report">
                    <h1 style="text-align:center; color:var(--dark)">ZAD OMNI | REPORT</h1>
                    <p style="text-align:center; color:var(--primary); font-weight:900">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ø´Ø§Ù…Ù„ 2026</p>
                    <hr style="margin:20px 0">
                    <div style="display:flex; justify-content:space-between">
                        <span><b>Ø§Ù„Ù…ØªØ·ÙˆØ¹:</b> ${vName}</span>
                        <span class="badge-gold">Ø§Ù„Ù†Ø³Ø¨Ø©: ${score}%</span>
                    </div>
                    <div class="ai-note">
                        <b>ØªØ­Ù„ÙŠÙ„ DNA Ø§Ù„Ø£Ø¯Ø§Ø¡:</b> ${dna} <br>
                        <b>Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ©:</b> ${strengths.join('ØŒ ') || 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©'} <br>
                        <b>Ù†Ù‚Ø§Ø· Ø§Ù„Ø¶Ø¹Ù:</b> ${weaknesses.join('ØŒ ') || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}
                    </div>
                    ${score > 90 ? `<div style="text-align:center; padding:20px; border:2px dashed gold; border-radius:15px; margin-top:20px">ğŸ… ÙˆØ³Ø§Ù… Ø§Ù„ØªÙ…ÙŠØ² Ø§Ù„Ø§Ø³ØªØ­Ù‚Ø§Ù‚ÙŠ Ù…Ù† Ø²Ø§Ø¯ ğŸ…</div>` : ''}
                    ${idea ? `<p style="margin-top:20px"><b>Ø§Ù„ÙÙƒØ±Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ©:</b> ${idea}</p>` : ''}
                    <button class="btn-submit" style="margin-top:30px; background:var(--dark)" onclick="omni.downloadReport()">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø±Ø³Ù…ÙŠ PDF</button>
                </div>
            `;
            // Ø­ÙØ¸ Ø§Ù„ÙÙƒØ±Ø© ÙÙŠ Ø§Ù„Ø³ÙŠØ±ÙØ±
            if(idea) {
                await fetch(`${API}/evaluations`, { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({volunteer_id: document.getElementById('ev-select').value, percentage: score, notes: idea, evaluation_month: 12, evaluation_year: 2025}) });
            }
        },
        downloadReport() {
            const el = document.getElementById('pdf-report');
            html2pdf().from(el).set({margin:1, filename:'ZAD_Report.pdf'}).save();
        },

        // --- Ø§Ù„Ù…Ù‚ÙŠÙ…ÙŠÙ† ---
        addAdmin() {
            const email = document.getElementById('adm-email').value;
            const role = document.getElementById('adm-role').value;
            if(!email.includes('@')) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­");
            admins.push({id:Date.now(), email, role});
            localStorage.setItem('z_adms', JSON.stringify(admins));
            this.renderAdmins();
        },
        renderAdmins() {
            let h = `<table><tr><th>Ø§Ù„Ø¨Ø±ÙŠØ¯</th><th>Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©</th><th>Ø¥Ø¬Ø±Ø§Ø¡</th></tr>`;
            admins.forEach(a => h += `<tr><td>${a.email}</td><td>${a.role}</td><td><button onclick="omni.delAdm(${a.id})">ØªØ¹Ø·ÙŠÙ„</button></td></tr>`);
            document.getElementById('adm-table-render').innerHTML = h + `</table>`;
        },
        delAdm(id) { admins = admins.filter(a => a.id !== id); localStorage.setItem('z_adms', JSON.stringify(admins)); this.renderAdmins(); }
    };

    omni.init();
</script>
</body>
</html>
